<h1>1724 RUST Final Project - Decentralized Password Manager</h1>

<p>A decentralized password manager built in Rust using SQLite and encryption.</p>

<h2>Team Members</h2>

<ul>
<li><strong>Siting Li</strong> (1005046335) - lisitin1 - siting.li@mail.utoronto.ca</li>
<li><strong>Zifan Meng</strong> (12345678) - lalalala - abbccddee</li>
</ul>

<hr />

<h2>Motivation</h2>

<p>The motivation behind this project stems from the increasing need for secure and privacy-focused solutions in the digital age. With the proliferation of online accounts and services, people are increasingly relying on password managers to securely store and manage their passwords. However, existing centralized password management solutions pose significant privacy and security risks. Many of these systems store user passwords in centralized databases, making them prime targets for cyberattacks. Additionally, users often have to trust these systems to keep their passwords secure, leaving them vulnerable in case of a data breach or misuse.</p>

<p>Our motivation for this project is to build a password manager that addresses these risks by adopting a <strong>decentralized</strong> approach. By using peer-to-peer networking and strong cryptographic methods, we aim to create a password manager where sensitive data is not stored in a single centralized database. This ensures that even if one device is compromised, the user's passwords remain secure, as the data is never stored in plaintext on any server. Additionally, users will have complete control over their data, empowering them to manage their passwords securely without relying on third-party service providers.</p>

<p>By building this decentralized password manager in Rust, we are leveraging the power of memory safety, performance, and modern encryption techniques to offer a more secure and private alternative to traditional password management tools. This project fulfills a gap in the ecosystem, providing a solution that emphasizes security, privacy, and decentralization in managing sensitive information.</p>

<hr />

<h2>Objectives</h2>

<p>The primary objective of this project is to develop a decentralized and secure password manager that guarantees user privacy through encryption and a zero-knowledge architecture. The system will provide a simple and secure interface for storing and retrieving passwords while ensuring data security, even in a decentralized environment.</p>

<h3>Key Objectives:</h3>

<ol>
<li><p><strong>End-to-End Encryption</strong>: Implement encryption mechanisms to ensure that passwords are encrypted locally before being stored, with no unencrypted data transmitted over the network. We will use the Sodiumoxide library for cryptographic security to protect passwords both in transit and at rest.</p></li>
<li><p><strong>Decentralization</strong>: Create a peer-to-peer (P2P) network that allows devices to communicate directly, avoiding the use of centralized servers. This reduces the risks of data breaches since passwords are not stored in a single location.</p></li>
<li><p><strong>Zero-Knowledge Architecture</strong>: Ensure that only the user can access their plaintext passwords by using a zero-knowledge model. Even the developers and administrators will have no access to the users' actual data, ensuring complete privacy.</p></li>
<li><p><strong>User-Friendly Command-Line Interface (CLI)</strong>: Design an intuitive CLI that allows users to add, retrieve, and manage their passwords easily. The tool should be easy to use for both casual and power users, ensuring broad accessibility.</p></li>
<li><p><strong>Security and Integrity</strong>: Build the system to handle password data securely, including robust encryption methods, secure hashing for master passwords, and thorough testing to identify potential vulnerabilities.</p></li>
<li><p><strong>Database Integration</strong>: Implement SQLite for local storage, using it to securely store encrypted passwords on the user's device. SQLite will provide a lightweight and reliable database solution for local data management.</p></li>
</ol>

<hr />

<h2>Features</h2>

<p>The decentralized password manager provides a variety of features designed to ensure secure password management while offering full control to the user. Below are the key features of the final project deliverable:</p>

<h3>1. <strong>End-to-End Encryption</strong></h3>

<ul>
<li>All passwords are encrypted locally on the user¡¯s device using strong cryptographic algorithms before being stored or transmitted over the network.</li>
<li>The Sodiumoxide library, a Rust wrapper around NaCl (a high-level cryptography library), is used to perform encryption and decryption operations.</li>
<li>Passwords are encrypted with a unique nonce (number used once), ensuring that each encryption is distinct and preventing certain types of cryptographic attacks.</li>
</ul>

<h3>2. <strong>Zero-Knowledge Architecture</strong></h3>

<ul>
<li>The password manager uses a <strong>zero-knowledge</strong> model, meaning that even the system¡¯s creators or administrators do not have access to the users' plaintext passwords.</li>
<li>Only the user can decrypt their passwords using their unique cryptographic keys, ensuring that sensitive data remains private, even if the system is compromised.</li>
</ul>

<h3>3. <strong>Peer-to-Peer (P2P) Synchronization</strong></h3>

<ul>
<li>Devices can synchronize passwords over a decentralized peer-to-peer network, eliminating the need for central servers.</li>
<li>Passwords are never stored centrally, reducing the risk of data breaches. Each device in the network can securely share and synchronize encrypted passwords.</li>
</ul>

<h3>4. <strong>Command-Line Interface (CLI)</strong></h3>

<ul>
<li>A user-friendly CLI allows users to perform key password management actions easily:
<ul>
<li><strong>Add passwords</strong>: Store new passwords securely with encryption.</li>
<li><strong>Retrieve passwords</strong>: Decrypt and view stored passwords when needed.</li>
<li><strong>Clean the database</strong>: Remove all stored data from the local database when needed.</li>
</ul></li>
<li>Commands are simple and easy to use, with clear options for interacting with the system.</li>
</ul>

<h3>5. <strong>Local Database Storage (SQLite)</strong></h3>

<ul>
<li>SQLite is used for local storage, where all passwords are stored encrypted, ensuring they are never exposed in plaintext.</li>
<li>SQLite provides an efficient and lightweight database solution for storing password data securely.</li>
</ul>

<h3>6. <strong>Secure Password Retrieval</strong></h3>

<ul>
<li>Passwords are retrieved securely from the local database and decrypted on the fly when the user needs access.</li>
<li>Decryption is done using the correct <strong>nonce</strong> and encryption key, ensuring that only the rightful owner of the password can decrypt it.</li>
</ul>

<h3>7. <strong>Validation of Input</strong></h3>

<ul>
<li>The password manager ensures that input data (such as titles and passwords) is valid before adding them to the database.</li>
<li>Empty or invalid inputs are rejected, and the user is prompted with a helpful error message to correct the issue.</li>
</ul>

<h3>8. <strong>Secure Password Duplication Check</strong></h3>

<ul>
<li>When attempting to add a password with a title that already exists in the database, the system prevents duplication by checking for existing entries.</li>
<li>If a password with the same title already exists, the user is informed, preventing overwriting of existing passwords.</li>
</ul>

<h3>9. <strong>Automatic Key Generation</strong></h3>

<ul>
<li>A random encryption key is generated for each user to ensure strong cryptographic protection of their data.</li>
<li>The key is used for encrypting and decrypting passwords and is never stored with the encrypted data, enhancing security.</li>
</ul>

<h3>10. <strong>Database Cleaning Feature</strong></h3>

<ul>
<li>The ability to clean or reset the entire password database allows users to delete all stored passwords from the local storage if desired.</li>
<li>This ensures that the application can be cleared of all sensitive data when no longer needed.</li>
</ul>

<p>These features together create a powerful, secure, and user-friendly decentralized password manager that ensures privacy, security, and control over sensitive information.</p>

<hr />

<h2>User's (or Developer's) Guide</h2>

<p>This guide will help users (or developers) understand how to interact with the decentralized password manager, whether using it as an end-user or as a developer working with the source code.</p>

<h3>1. <strong>Installation</strong></h3>

<h4><strong>Prerequisites</strong></h4>

<p>Ensure that the following are installed:
   - <strong>Rust</strong>: Install from <a href="https://rust-lang.org">rust-lang.org</a>.
   - <strong>SQLite</strong>: Install via your package manager.</p>

<h4><strong>Clone the Repository</strong></h4>

<p>To begin using or contributing to the project, clone the repository and install the necessary dependencies:</p>

<p><code>bash
git clone https://github.com/Siting-Li-utoronto/decentralized-password-manager.git
cd decentralized-password-manager
</code></p>

<h4><strong>Build the Project</strong></h4>

<p><code>bash
cargo build
</code></p>

<h4><strong>Run the Application</strong></h4>

<p>To see what command can be used:</p>

<p><code>bash
cargo run -- --help
</code></p>

<hr />

<h3>2. <strong>Command-Line Interface (CLI) Features</strong></h3>

<p>The CLI tool allows you to add, retrieve, and clean passwords securely. All commands follow this format:</p>

<p><code>bash
cargo run -- &lt;command&gt; [options]
</code></p>

<p>The following are examples for running this decentrialized password manager.</p>

<h4>2.1 <strong>Adding a Password</strong></h4>

<p>To securely add a password:</p>

<p><code>bash
cargo run -- add --title "example_title" --password "example_password"
</code></p>

<h5><strong>Options</strong></h5>

<ul>
<li><code>--title</code> or <code>-t</code>: Title for the password.</li>
<li><code>--password</code> or <code>-p</code>: The password you want to store.</li>
</ul>

<h5>Output:</h5>

<p>If successful, you will see:</p>

<p><code>text
Password added for 'example_title'. Store this nonce securely: &lt;nonce&gt;
</code></p>

<p><strong>Note</strong>: The <strong>nonce</strong> is critical for decryption. Save it securely; without it, you cannot retrieve the password.</p>

<hr />

<h4>2.2 <strong>Retrieving a Password</strong></h4>

<p>To retrieve a password:</p>

<p><code>bash <br />
cargo run -- get --title "example_title" --nonce "your_nonce"
</code></p>

<h5>Options:</h5>

<ul>
<li><code>--title</code> or <code>-t</code>: Title of the password to retrieve.</li>
<li><code>--nonce</code> or <code>-n</code>: Nonce required for decryption (provided when you added the password).</li>
</ul>

<h5>Output:</h5>

<p>If successful:</p>

<p><code>text <br />
Decrypted password for 'example_title': your_password_here
</code></p>

<h5>Example:</h5>

<p><code>bash <br />
cargo run -- get --title "email_account" --nonce "Base64NonceHere"
</code></p>

<hr />

<h4>2.3 <strong>Cleaning the Database</strong></h4>

<p>To reset the password database by deleting all stored entries:</p>

<p><code>bash <br />
cargo run -- clean
</code></p>

<h5>Output:</h5>

<p><code>text <br />
Database cleaned and reset.
</code></p>

<p><strong>Note</strong>: This action is <strong>irreversible</strong>. All stored passwords will be deleted.</p>

<hr />

<h3>3. Understanding Encryption and Keys</h3>

<h4>How it Works</h4>

<ul>
<li>Passwords are encrypted <strong>locally</strong> before storage using the <strong>Sodiumoxide</strong> library.</li>
<li>Each encryption generates a unique <strong>nonce</strong> and uses a <strong>32-byte key</strong>.</li>
<li>Decryption requires both the encrypted password and the nonce.</li>
</ul>

<hr />

<h4>Key Generation</h4>

<ul>
<li>A key is generated automatically at runtime using a static placeholder.</li>
</ul>

<h4>Security Notes:</h4>

<ol>
<li><strong>Never lose your nonce</strong>: Without the nonce, decryption is impossible.</li>
<li><strong>Store encryption keys securely</strong>: Do not expose your key in production environments.</li>
</ol>

<hr />

<h3>4. Developer Notes</h3>

<h4>Code Structure</h4>

<ul>
<li><strong><code>main.rs</code></strong>: Entry point for the application.</li>
<li><strong><code>cli.rs</code></strong>: Handles command-line commands using the Clap library.</li>
<li><strong><code>database.rs</code></strong>: Manages SQLite interactions (create table, add, retrieve, clean).</li>
<li><strong><code>encryption.rs</code></strong>: Handles password encryption and decryption.</li>
<li><strong><code>schema.rs</code></strong>: Defines the database schema for Diesel ORM.</li>
</ul>

<hr />

<h4>Testing</h4>

<p>To test the application, use:</p>

<p><code>bash <br />
cargo test
</code></p>

<hr />

<h4>Dependencies</h4>

<ul>
<li><strong>Clap</strong>: For parsing CLI commands.</li>
<li><strong>Diesel</strong>: For database interactions with SQLite.</li>
<li><strong>Sodiumoxide</strong>: For encryption and cryptographic functions.</li>
<li><strong>Base64</strong>: For encoding encrypted data and nonces.</li>
</ul>

<hr />

<h3>5. Error Handling</h3>

<h4>Common Errors and Fixes</h4>

<p>| <strong>Error</strong>                                       | <strong>Cause</strong>                               | <strong>Solution</strong>                               |
|-------------------------------------------------|----------------------------------------|-------------------------------------------|
| <code>Failed to add password: Title cannot be empty.</code> | Title was not provided.                | Use <code>--title</code> with a valid string.         |
| <code>Failed to decode ciphertext</code>                   | Invalid nonce or encrypted password.   | Ensure correct nonce and encrypted data.   |
| <code>Error: Missing required argument --nonce</code>      | Missing <code>--nonce</code> when using <code>get</code>.    | Always provide the correct nonce.          |
| <code>Failed to connect to database</code>                 | Database file issue.                   | Ensure SQLite is installed and accessible. |
| <code>No password found for 'title'</code>                 | Title does not exist in the database.  | Double-check the title you entered.        |</p>

<hr />
